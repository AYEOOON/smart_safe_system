# ğŸ”’ ìŠ¤ë§ˆíŠ¸ ê¸ˆê³  ì‹œìŠ¤í…œ (Smart Safe System)
---

## 2024-2 ì„ë² ë””ë“œ ì‹œìŠ¤í…œ 02ë¶„ë°˜ 6ì¡°

#### íŒ€ì›
- **20190362 ê¹€í¬ê²¸** 
- **20200888 ì´ì¬ìš°**   
- **20220242 ê¹€ì•„ì—°** 
- **20220625 ì‹ ì±„ì—°**

### ğŸ§¾ ëª©ì°¨
1. [í”„ë¡œì íŠ¸ ê°œìš”](#-1-í”„ë¡œì íŠ¸-ê°œìš”)  
2. [ì£¼ìš” ê¸°ëŠ¥](#-2-ì£¼ìš”-ê¸°ëŠ¥)  
3. [ì„¤ê³„ ê°œìš”](#%EF%B8%8F-3-ì„¤ê³„-ê°œìš”)  
4. [í•˜ë“œì›¨ì–´ êµ¬ì„±](#%EF%B8%8F-4-í•˜ë“œì›¨ì–´-êµ¬ì„±)  
5. [ì†Œí”„íŠ¸ì›¨ì–´ êµ¬ì„±](#-5-ì†Œí”„íŠ¸ì›¨ì–´-êµ¬ì„±)  
6. [ë¡œì§ ì „ì²´ ì„¤ëª…](#-6-ë¡œì§-ì „ì²´-ì„¤ëª…)  
7. [ì½”ë“œ êµ¬ì¡° ë° ì„¤ëª…](#-7-ì½”ë“œ-êµ¬ì¡°-ë°-ì„¤ëª…)  
8. [í”„ë¡œì íŠ¸ ì‹œì—° ë™ì˜ìƒ](#-8-í”„ë¡œì íŠ¸-ì‹œì—°-ë™ì˜ìƒ)   

---

## ğŸ“Œ 1. í”„ë¡œì íŠ¸ ê°œìš”

**ìŠ¤ë§ˆíŠ¸ ê¸ˆê³  ì‹œìŠ¤í…œ**ì€ ë³´ì•ˆì„ ê°•í™”í•˜ê³  ì‚¬ìš©ì í¸ì˜ì„±ì„ ë†’ì´ê¸° ìœ„í•´ ì„¤ê³„ëœ ì„ë² ë””ë“œ ì‹œìŠ¤í…œ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.  

#### **ëª©í‘œ**  
- ì‚¬ìš©ìê°€ **ìŠ¤ë§ˆíŠ¸í°ê³¼ ë¸”ë£¨íˆ¬ìŠ¤ í†µì‹ ì„ í†µí•´ ê¸ˆê³ ë¥¼ ì œì–´**í•  ìˆ˜ ìˆë„ë¡ í•˜ì—¬, ê°„ë‹¨í•˜ê³  íš¨ìœ¨ì ì¸ ë³´ì•ˆ ê²½í—˜ì„ ì œê³µí•©ë‹ˆë‹¤.
- ë¹„ë°€ë²ˆí˜¸ ì¸ì¦, ë³µêµ¬ ì§ˆë¬¸, ì›€ì§ì„ ê°ì§€ ë“±ì˜ ê¸°ëŠ¥ì„ í†µí•´ **ë³´ì•ˆì„±ì„ ê·¹ëŒ€í™”**í•˜ê³ ì í•©ë‹ˆë‹¤.

#### **ê¸ˆê³  ì „ì²´ ì‚¬ì§„**
<img src="https://github.com/user-attachments/assets/11a4bfbf-36cb-4f68-bb08-fe2825013a4e" width="400" />

---

## ğŸŒŸ 2. ì£¼ìš” ê¸°ëŠ¥

- **ìŠ¤ìœ„ì¹˜ë¥¼ ì´ìš©í•œ ë¸”ë£¨íˆ¬ìŠ¤ ì—°ê²°**  
  - ì‚¬ìš©ìê°€ **ìŠ¤ìœ„ì¹˜ë¥¼ ëˆ„ë¥´ë©´ ë¸”ë£¨íˆ¬ìŠ¤ í†µì‹ **ì´ í™œì„±í™”ë©ë‹ˆë‹¤.

- **ë¸”ë£¨íˆ¬ìŠ¤ ê¸°ë°˜ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥**  
  - ë¸”ë£¨íˆ¬ìŠ¤ ëª¨ë“ˆì„ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ì ìŠ¤ë§ˆíŠ¸í°ê³¼ í†µì‹ í•©ë‹ˆë‹¤.  
  - ìŠ¤ë§ˆíŠ¸í° ì•±ìœ¼ë¡œ **ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥**í•©ë‹ˆë‹¤.

- **ë¹„ë°€ë²ˆí˜¸ ì¸ì¦**  
  - ì…ë ¥ëœ ë¹„ë°€ë²ˆí˜¸ë¥¼ **ì‚¬ì „ì— ì„¤ì •ëœ ê°’**ê³¼ ë¹„êµí•©ë‹ˆë‹¤.  
  - **ë¹„ë°€ë²ˆí˜¸ ì¼ì¹˜** ì‹œ ê¸ˆê³  ì ê¸ˆ í•´ì œ, ë¶ˆì¼ì¹˜ ì‹œ ì ê¸ˆì´ ìœ ì§€ë©ë‹ˆë‹¤.

- **ì ê¸ˆ ì¥ì¹˜ ì œì–´**  
  - ì„œë³´ ëª¨í„°ë¥¼ ì´ìš©í•˜ì—¬ ê¸ˆê³ ì˜ ì ê¸ˆ ìƒíƒœë¥¼ **ì—´ê±°ë‚˜ ë‹«ìŠµë‹ˆë‹¤**.

- **LED ìƒíƒœ í‘œì‹œ**  
  - í•´ì œ ì‹œ ì´ˆë¡ìƒ‰ LEDê°€ ì ë“±ë©ë‹ˆë‹¤.  
  - ì ê¸ˆ ì‹œ ë¹¨ê°„ìƒ‰ LEDê°€ ì ë“±ë©ë‹ˆë‹¤.

- **ê°€ì†ë„ ì„¼ì„œ í™œìš©**  
  - ê¸ˆê³ ì˜ ì›€ì§ì„ ë˜ëŠ” ì¶©ê²© ê°ì§€ ì‹œ ê²½ê³ ìŒì´ ë°œìƒí•©ë‹ˆë‹¤.

---

## ğŸ› ï¸ 3. ì„¤ê³„ ê°œìš”
#### ì„¤ê³„ ì‚¬ì§„
![image](https://github.com/user-attachments/assets/0f0c3a2d-b5da-4e7c-aabe-8555c8d7e592)


#### ì‹œìŠ¤í…œ êµ¬ì„±
- **ë¼ì¦ˆë² ë¦¬ íŒŒì´**: ì‹œìŠ¤í…œì˜ ì¤‘ì•™ ì œì–´ ì—­í• ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.  
- **ìŠ¤ìœ„ì¹˜**: ë¸”ë£¨íˆ¬ìŠ¤ ì—°ê²°ì„ í™œì„±í™”í•©ë‹ˆë‹¤.  
- **ë¸”ë£¨íˆ¬ìŠ¤ ëª¨ë“ˆ (HC-05)**: ìŠ¤ë§ˆíŠ¸í°ê³¼ì˜ ë°ì´í„° í†µì‹ ì„ í•©ë‹ˆë‹¤.  
- **ì„œë³´ ëª¨í„°**: ê¸ˆê³  ì ê¸ˆ ì¥ì¹˜ë¥¼ ì œì–´í•©ë‹ˆë‹¤.  
- **LED**: ì¸ì¦ ìƒíƒœ ë° ì‹œìŠ¤í…œ ìƒíƒœë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.  
- **ê°€ì†ë„ ì„¼ì„œ (ADXL345)**: ê¸ˆê³  ì´ë™ ë° ì¶©ê²©ì„ ê°ì§€í•©ë‹ˆë‹¤.  
- **ë¶€ì €**: ê²½ê³  ì•Œë¦¼ì„ ì¶œë ¥í•©ë‹ˆë‹¤.  

---

## âš™ï¸ 4. í•˜ë“œì›¨ì–´ êµ¬ì„±
### ì „ì²´ íšŒë¡œë„
![Untitled Sketch_bb](https://github.com/user-attachments/assets/8ecdda23-e360-4620-a242-5765667dd562)


**ë¼ì¦ˆë² ë¦¬ íŒŒì´ ë° GPIO í•€ ì—°ê²°**
| êµ¬ì„± ìš”ì†Œ           | ì—­í•  ë° ìƒíƒœ                 | GPIO í•€  |
|--------------------|-------------------------|----------|
| **ìŠ¤ìœ„ì¹˜**         | ë¸”ë£¨íˆ¬ìŠ¤ í†µì‹  í™œì„±í™”           | GPIO 24  |
| **ë¸”ë£¨íˆ¬ìŠ¤ ëª¨ë“ˆ**    | RX                      | GPIO 1   |
|                    | TX                      | GPIO 0   |
| **ì„œë³´ ëª¨í„°**       | PWM ì œì–´                 | GPIO 12  |
| **LED ìƒíƒœ í‘œì‹œ**    | ì´ˆë¡ìƒ‰ LED (í•´ì œ ì‹œ ì ë“±)     | GPIO 23  |
|                    | ë¹¨ê°„ìƒ‰ LED (ì ê¸ˆ ì‹œ ì ë“±)     | GPIO 16  |
| **ê°€ì†ë„ ì„¼ì„œ**     | SDA                     | GPIO 10  |
|                    | SDO                     | GPIO 9   |
|                    | SDL                     | GPIO 11  |
|                    | CS                      | GPIO 8   |
| **ë¶€ì €**           | ê²½ê³ ìŒ ì¶œë ¥                 | GPIO 18  |


---

## ğŸ’» 5. ì†Œí”„íŠ¸ì›¨ì–´ êµ¬ì„±

#### (1) SPI ê¸°ë°˜ ì„¼ì„œ ì œì–´
- **WiringPi ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©**  
  - SPI í†µì‹  ì´ˆê¸°í™” ë° ë°ì´í„°ë¥¼ ì£¼ê³ ë°›ìŠµë‹ˆë‹¤.  
  - ADXL345 ì„¼ì„œì™€ SPI í”„ë¡œí† ì½œë¡œ ì—°ê²°ë˜ì–´ ì„¼ì„œ ë°ì´í„°ë¥¼ ì½ê³  í•´ì„í•©ë‹ˆë‹¤.  

- **ì£¼ìš” í•¨ìˆ˜**  
  - **ë ˆì§€ìŠ¤í„° ì¡°ì‘**  
    - `writeRegister_ADXL345()`: íŠ¹ì • ë ˆì§€ìŠ¤í„°ì— ë°ì´í„° ê¸°ë¡í•©ë‹ˆë‹¤.  
    - `readRegister_ADXL345()`: íŠ¹ì • ë ˆì§€ìŠ¤í„°ì—ì„œ ë°ì´í„° ì½ê¸°í•©ë‹ˆë‹¤.  
  - **ë°ì´í„° ì½ê¸°**  
    - `readAccelerometerData()`: ê°€ì†ë„ ë°ì´í„°ë¥¼ ì½ì–´ ë°˜í™˜í•©ë‹ˆë‹¤.


#### (2) ìŠ¤ë ˆë“œ êµ¬ì¡°
- **ì„¼ì„œ ìŠ¤ë ˆë“œ**: ê°€ì†ë„ ë°ì´í„°ë¥¼ ì§€ì†ì ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•©ë‹ˆë‹¤.  
  - íŠ¹ì • ì¡°ê±´ ì´ìƒ ì›€ì§ì„ ë°œìƒ ì‹œ **ë¶€ì € í”Œë˜ê·¸**ë¥¼ í™œì„±í™”í•©ë‹ˆë‹¤.  
- **ë¶€ì € ìŠ¤ë ˆë“œ**: ë¶€ì € í”Œë˜ê·¸ í™•ì¸ í›„ ê²½ê³ ìŒì„ ë°œìƒí•©ë‹ˆë‹¤.  
- **ë¹„ë°€ë²ˆí˜¸ ì¸ì¦ ìŠ¤ë ˆë“œ**: ìŠ¤ë§ˆíŠ¸í° ì•±ìœ¼ë¡œë¶€í„° ì…ë ¥ë°›ì€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ê²€ì¦í•©ë‹ˆë‹¤.  


#### (3) ê¸ˆê³  ì ê¸ˆ/í•´ì œ
- **ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ ë° ê²€ì¦**  
  - ì‚¬ìš©ìê°€ **UART**ë¥¼ í†µí•´ ì…ë ¥í•œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ê²€ì¦í•©ë‹ˆë‹¤.  
  - ë¹„ë°€ë²ˆí˜¸ ê²€ì¦ í•¨ìˆ˜: `checkPassword()`  
    - ì¼ì¹˜ ì‹œ: ì„œë³´ ëª¨í„°ë¥¼ ì œì–´í•˜ì—¬ ê¸ˆê³  ì ê¸ˆ í•´ì œí•©ë‹ˆë‹¤.  
    - ë¶ˆì¼ì¹˜ ì‹œ: ì ê¸ˆ ìœ ì§€ ë° ì‹¤íŒ¨ íšŸìˆ˜ ì¦ê°€í•©ë‹ˆë‹¤.

- **ì„œë³´ ëª¨í„° ì œì–´**  
  - ì„œë³´ ëª¨í„° ì‘ë™ í•¨ìˆ˜: `rotate_Servo()`  
  - ë¹„ë°€ë²ˆí˜¸ ì¸ì¦ ì„±ê³µ ì‹œ ê¸ˆê³ ë¥¼ ì—½ë‹ˆë‹¤.

- **ë¹„ë°€ë²ˆí˜¸ ì‹¤íŒ¨ ê´€ë¦¬**  
  - ì˜ëª»ëœ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ íšŸìˆ˜ê°€ ì´ˆê³¼ë˜ë©´ **ë³µêµ¬ ì§ˆë¬¸**ìœ¼ë¡œ ì „í™˜í•©ë‹ˆë‹¤.


#### (4) ë¹„ë°€ë²ˆí˜¸ ë³µêµ¬
- **ë³µêµ¬ ì§ˆë¬¸ ì²˜ë¦¬**  
  - ì‚¬ìš©ìì—ê²Œ ë³µêµ¬ ì§ˆë¬¸ì„ ì œì‹œí•˜ë©°, ì •ë‹µ ì…ë ¥ ì‹œ ì‹œë„ íšŸìˆ˜ê°€ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.  
  - ë³µêµ¬ ì§ˆë¬¸ì˜ ì •ë‹µ ì…ë ¥ ì‹¤íŒ¨ ì‹œ ì‹œìŠ¤í…œì„ ì¢…ë£Œí•©ë‹ˆë‹¤.


#### (5) LED ìƒíƒœ ë° ê²½ê³ ìŒ
- **LED ìƒíƒœ í‘œì‹œ**  
  - ì´ˆë¡ìƒ‰ LED: ì¸ì¦ ì„±ê³µ ë° ê¸ˆê³  ì ê¸ˆ í•´ì œë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.  
  - ë¹¨ê°„ìƒ‰ LED: ì¸ì¦ ì‹¤íŒ¨ ë° ì ê¸ˆ ìœ ì§€ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.


- **ê²½ê³ ìŒ ë°œìƒ**  
  - ê¸ˆê³ ê°€ ì›€ì§ì´ê±°ë‚˜ ì¶©ê²©ì´ ë°œìƒí•˜ë©´ ë¶€ì €ë¥¼ ìš¸ë ¤ ê²½ê³ ìŒì„ ì¶œë ¥í•©ë‹ˆë‹¤.  

---

## ğŸ§© 6. ë¡œì§ ì „ì²´ ì„¤ëª…:
![image](https://github.com/user-attachments/assets/36a39a92-2c1c-4ad0-b660-2f633faeff19)

#### (1) ì´ˆê¸°í™”
- GPIO í•€ê³¼ UART ì´ˆê¸°í™”ë¥¼ í†µí•´ ê¸ˆê³ ì˜ ê° í•˜ë“œì›¨ì–´ê°€ ì‘ë™ ì¤€ë¹„ë¥¼ ì™„ë£Œí•©ë‹ˆë‹¤.
- ì´ˆê¸°í™” ê³¼ì •ì—ì„œ ë¸”ë£¨íˆ¬ìŠ¤ í†µì‹ ì„ í™œì„±í™”í•˜ì—¬ ìŠ¤ë§ˆíŠ¸í° ì•±ê³¼ì˜ ì—°ê²°ì„ ì„¤ì •í•©ë‹ˆë‹¤.

#### (2) ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ ë° ì¸ì¦
- ì‚¬ìš©ìëŠ” ìŠ¤ë§ˆíŠ¸í° ì•±ì„ í†µí•´ 4ìë¦¬ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•©ë‹ˆë‹¤.
- ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ ì‹œ, UARTë¡œ ë°ì´í„°ë¥¼ ìˆ˜ì‹ í•˜ê³  ì…ë ¥ê°’ì„ ê²€ì¦í•˜ëŠ” ë¡œì§ì´ ì‹¤í–‰ë©ë‹ˆë‹¤.
- ì…ë ¥ê°’ì´ ì„¤ì •ëœ ë¹„ë°€ë²ˆí˜¸ì™€ ì¼ì¹˜í•˜ë©´ ì„œë³´ëª¨í„°ê°€ ì‘ë™í•˜ì—¬ ê¸ˆê³ ë¥¼ í•´ì œí•©ë‹ˆë‹¤.
- ë¶ˆì¼ì¹˜ ì‹œ ì‹œë„ íšŸìˆ˜ê°€ ì¦ê°€í•˜ë©°, ì‹¤íŒ¨ ë©”ì‹œì§€ê°€ ì¶œë ¥ë©ë‹ˆë‹¤.

#### (3) ë¹„ë°€ë²ˆí˜¸ ë³µêµ¬ ëª¨ë“œ
- ì…ë ¥ ì‹¤íŒ¨ íšŸìˆ˜ê°€ ìµœëŒ€ í—ˆìš© íšŸìˆ˜(`MAC_ATTEMPTS`)ë¥¼ ì´ˆê³¼í•˜ë©´ ë³µêµ¬ ì§ˆë¬¸ ëª¨ë“œê°€ í™œì„±í™”ë©ë‹ˆë‹¤.
- ì‚¬ìš©ìì—ê²Œ ë³µêµ¬ ì§ˆë¬¸ì„ ì œì‹œí•˜ê³ , ì •ë‹µ ì…ë ¥ ì‹œ ì‹¤íŒ¨ íšŸìˆ˜ê°€ ì´ˆê¸°í™”ë˜ë©° ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ìœ¼ë¡œ ë³µê·€í•©ë‹ˆë‹¤.
- ë³µêµ¬ ì§ˆë¬¸ì— ì‹¤íŒ¨í•˜ë©´ ê²½ê³ ìŒê³¼ í•¨ê»˜ ì‹œìŠ¤í…œì´ ì¢…ë£Œë©ë‹ˆë‹¤.

#### (4) ê¸ˆê³  ì ê¸ˆ ë° LED ì œì–´
- ì¸ì¦ì´ ì„±ê³µí•˜ê±°ë‚˜ ê¸ˆê³ ë¥¼ ì ê·¸ëŠ” ê²½ìš° ì„œë³´ëª¨í„°ì™€ LEDì˜ ìƒíƒœë¥¼ ë³€ê²½í•©ë‹ˆë‹¤.
  - **í•´ì œ ìƒíƒœ**: ì„œë³´ëª¨í„° ê°ë„ 250Â°, ì´ˆë¡ìƒ‰ LED ì ë“±.
  - **ì ê¸ˆ ìƒíƒœ**: ì„œë³´ëª¨í„° ê°ë„ 50Â°, ë¹¨ê°„ìƒ‰ LED ì ë“±.

#### (5) ê²½ê³ ìŒ ë°œìƒ
- ê°€ì†ë„ ì„¼ì„œ ë°ì´í„°ë¥¼ ì§€ì†ì ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•˜ë©°, ì¼ì • ê¸°ì¤€ ì´ìƒì˜ ì›€ì§ì„ì„ ê°ì§€í•˜ë©´ ê²½ê³ ìŒì„ ë°œìƒì‹œí‚µë‹ˆë‹¤.

---

## âš“ 7. ì½”ë“œ êµ¬ì¡° ë° ì„¤ëª…  
ìŠ¤ë§ˆíŠ¸ ê¸ˆê³  ì‹œìŠ¤í…œì˜ ì½”ë“œëŠ” ê¸°ëŠ¥ë³„ë¡œ ë‚˜ë‰˜ì–´ ìˆìœ¼ë©°, ì£¼ìš” êµ¬ì„± ìš”ì†ŒëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:  

### ì£¼ìš” ë³€ìˆ˜  
- `password`, `recoveryAnswer`  
  ê¸ˆê³ ì˜ ë¹„ë°€ë²ˆí˜¸ì™€ ë³µêµ¬ ì§ˆë¬¸ì˜ ì •ë‹µì„ ì •ì˜.
- `safeUnlocked`  
  ê¸ˆê³  ì ê¸ˆ ìƒíƒœë¥¼ ë‚˜íƒ€ë‚´ëŠ” í”Œë˜ê·¸ (0: ì ê¹€, 1: í•´ì œ).
- `attempts`  
  ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ ì‹¤íŒ¨ íšŸìˆ˜ë¥¼ ì¶”ì .
- `recoveryMode`  
  ë³µêµ¬ ì§ˆë¬¸ ìƒíƒœë¥¼ ì œì–´ (0: ë¹„í™œì„±í™”, 1: í™œì„±í™”).

---

### ì£¼ìš” í•¨ìˆ˜ ì •ë¦¬

### 1. ADXL345 ê´€ë ¨ í•¨ìˆ˜

#### **ì´ˆê¸°í™” ë° ë ˆì§€ìŠ¤í„° ì œì–´**
- **`int initSPI()`**  
  SPI ì´ˆê¸°í™”ë¥¼ ìˆ˜í–‰í•˜ëŠ” í•¨ìˆ˜ë¡œ, CS í•€ê³¼ SPI ì„¤ì •ì„ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.

- **`void writeRegister_ADXL345(char address, char value)`**  
  ADXL345ì˜ ë ˆì§€ìŠ¤í„°ì— ë°ì´í„°ë¥¼ ê¸°ë¡í•©ë‹ˆë‹¤.  
  - **`address`**: ë ˆì§€ìŠ¤í„° ì£¼ì†Œ  
  - **`value`**: ê¸°ë¡í•  ê°’  

- **`void readRegister_ADXL345(char registerAddress, int numBytes, char *values)`**  
  ADXL345ì˜ íŠ¹ì • ë ˆì§€ìŠ¤í„°ì—ì„œ ë°ì´í„°ë¥¼ ì½ì–´ì˜µë‹ˆë‹¤.  
  - **`registerAddress`**: ì½ì„ ë ˆì§€ìŠ¤í„° ì£¼ì†Œ  
  - **`numBytes`**: ì½ì„ ë°ì´í„° í¬ê¸°  
  - **`values`**: ë°ì´í„°ë¥¼ ì €ì¥í•  ë²„í¼  

---

#### **ê°€ì†ë„ ì„¼ì„œ ë°ì´í„° ì½ê¸°**
- **`void readAccelerometerData(short *x, short *y, short *z)`**  
  ADXL345 ì„¼ì„œì˜ X, Y, Z ì¶• ë°ì´í„°ë¥¼ ì½ì–´ ë°˜í™˜í•©ë‹ˆë‹¤.  
  - **`x`**, **`y`**, **`z`**: ì¶•ë³„ ë°ì´í„°ê°€ ì €ì¥ë©ë‹ˆë‹¤.

---

#### **ìŠ¤ë ˆë“œ ê´€ë ¨**
- **`void *sensorThread(void *arg)`**  
  ê°€ì†ë„ ì„¼ì„œ ë°ì´í„°ë¥¼ ì§€ì†ì ìœ¼ë¡œ ì½ëŠ” ìŠ¤ë ˆë“œ í•¨ìˆ˜ì…ë‹ˆë‹¤.  
  - **`arg`**: ê³µìœ  ë°ì´í„° êµ¬ì¡°ì²´ í¬ì¸í„°(`SharedData`)

- **`void *buzzerThread(void *arg)`**  
  ë¶€ì €ë¥¼ ì œì–´í•˜ëŠ” ìŠ¤ë ˆë“œ í•¨ìˆ˜ì…ë‹ˆë‹¤.  
  - **`arg`**: ê³µìœ  ë°ì´í„° êµ¬ì¡°ì²´ í¬ì¸í„°(`SharedData`)

---

#### **ë¶€ì € ì œì–´**
- **`void triggerBuzzer(int durationMs)`**  
  ì¼ì • ì‹œê°„ ë™ì•ˆ ë¶€ì €ë¥¼ ì‘ë™ì‹œí‚µë‹ˆë‹¤.  
  - **`durationMs`**: ë¶€ì € ì‘ë™ ì‹œê°„(ë°€ë¦¬ì´ˆ)

- **`void triggerBuzzerPWM(int durationMs, int frequency)`**  
  PWMì„ ì‚¬ìš©í•˜ì—¬ ë¶€ì €ë¥¼ ì œì–´í•©ë‹ˆë‹¤.  
  - **`durationMs`**: ë¶€ì € ì‘ë™ ì‹œê°„(ë°€ë¦¬ì´ˆ)  
  - **`frequency`**: ë¶€ì €ì˜ ì‘ë™ ì£¼íŒŒìˆ˜(Hz)

---

### 2. ë¹„ë°€ë²ˆí˜¸ ë° ì„œë³´ëª¨í„° ê´€ë ¨ í•¨ìˆ˜

#### **UART ë° ì„œë³´ëª¨í„° ì œì–´**
- **`void rotate_Servo(int angle)`**  
  ì„œë³´ëª¨í„°ì˜ ê°ë„ë¥¼ ì œì–´í•©ë‹ˆë‹¤.  
  - **`angle`**: ì„¤ì •í•  ê°ë„

- **`void serialWriteBytes(const int fd, const char* s)`**  
  UARTë¥¼ í†µí•´ ë°ì´í„°ë¥¼ ì „ì†¡í•©ë‹ˆë‹¤.  
  - **`fd`**: UART íŒŒì¼ ë””ìŠ¤í¬ë¦½í„°  
  - **`s`**: ì „ì†¡í•  ë°ì´í„° ë¬¸ìì—´  

- **`unsigned char serialRead(const int fd)`**  
  UARTë¥¼ í†µí•´ ë°ì´í„°ë¥¼ ìˆ˜ì‹ í•©ë‹ˆë‹¤.  
  - **`fd`**: UART íŒŒì¼ ë””ìŠ¤í¬ë¦½í„°  
  - **ë°˜í™˜ê°’**: ìˆ˜ì‹ ëœ 1ë°”ì´íŠ¸ ë°ì´í„°  

---

#### **ë¹„ë°€ë²ˆí˜¸ ë° ë³µêµ¬ ì§ˆë¬¸**
- **`int checkPassword(const char* input)`**  
  ì…ë ¥ëœ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì €ì¥ëœ ë¹„ë°€ë²ˆí˜¸ì™€ ë¹„êµí•˜ì—¬ ì¼ì¹˜ ì—¬ë¶€ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.  
  - **`input`**: ì…ë ¥ëœ ë¹„ë°€ë²ˆí˜¸ ë¬¸ìì—´  
  - **ë°˜í™˜ê°’**: ì¼ì¹˜í•˜ë©´ `1`, ë¶ˆì¼ì¹˜í•˜ë©´ `0`

- **`int checkRecoveryAnswer(const char* input)`**  
  ì…ë ¥ëœ ë³µêµ¬ ì§ˆë¬¸ì˜ ë‹µë³€ì„ ì €ì¥ëœ ì •ë‹µê³¼ ë¹„êµí•©ë‹ˆë‹¤.  
  - **`input`**: ì…ë ¥ëœ ë‹µë³€ ë¬¸ìì—´  
  - **ë°˜í™˜ê°’**: ì¼ì¹˜í•˜ë©´ `1`, ë¶ˆì¼ì¹˜í•˜ë©´ `0`

---

#### **ë¹„ë°€ë²ˆí˜¸ ê´€ë¦¬**
- **`void checkPW()`**  
  ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ ë° ë³µêµ¬ ì§ˆë¬¸ ì²˜ë¦¬ë¥¼ í¬í•¨í•˜ì—¬ ê¸ˆê³ ì˜ ì ê¸ˆ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ” ì£¼ìš” ë¡œì§ì…ë‹ˆë‹¤.

---

### ì½”ë“œ ì£¼ìš” ë¶€ë¶„ ì„¤ëª…  
#### 1. SPI ì´ˆê¸°í™” ë° GPIO ì„¤ì •

**ì„¤ëª…**  
ë¼ì¦ˆë² ë¦¬ íŒŒì´ì—ì„œ SPI í†µì‹  ë° GPIO í•€ì„ ì´ˆê¸°í™”í•˜ì—¬ í•˜ë“œì›¨ì–´ì™€ í†µì‹  ê°€ëŠ¥í•˜ê²Œ ì„¤ì •í•©ë‹ˆë‹¤.

**ì£¼ìš” ê¸°ëŠ¥**
- SPI ì´ˆê¸°í™”
- GPIO í•€ ëª¨ë“œ ì„¤ì •
- ì´ˆê¸° ìƒíƒœ ì„¤ì •

```c
int initSPI() {
    if (wiringPiSetupGpio() == -1) {
        fprintf(stderr, "Failed to setup GPIO.\n");
        return -1;
    }

    if (wiringPiSPISetupMode(SPI_CH, SPI_SPEED, SPI_MODE) == -1) {
        fprintf(stderr, "Failed to setup SPI.\n");
        return -1;
    }

    pinMode(CS_GPIO, OUTPUT);
    pinMode(BUZZER_GPIO, OUTPUT);
    digitalWrite(CS_GPIO, HIGH); // CS ì´ˆê¸°í™”
    digitalWrite(BUZZER_GPIO, LOW); // ë¶€ì € ì´ˆê¸°í™”
    return 0;
}
```

---

#### 2. ADXL345 ì„¼ì„œ ì œì–´

**ì„¤ëª…**  
ê°€ì†ë„ ì„¼ì„œ(ADXL345)ì™€ SPIë¥¼ í†µí•´ í†µì‹ í•˜ì—¬ ë°ì´í„°ë¥¼ ì½ê³ , ê¸ˆê³  ì›€ì§ì„ì„ ê°ì§€í•©ë‹ˆë‹¤. í•´ë‹¹ ì›€ì§ì„ì— ëŒ€í•œ ê°’ì€ adxl345ì—ì„œ spií†µì‹ ì„ í†µí•˜ì—¬ x, y, zì¶•ì˜ ê°’ë³€í™”ë¥¼ ê°ì§€í•©ë‹ˆë‹¤. ì…ë ¥ëœ x, y, zì¶• ë°ì´í„°ëŠ” ì´ì „ì— ì…ë ¥ëœ ê°’ê³¼ ë¹„êµí•˜ì—¬ thresholdê°’ì„ ë„˜ê¸°ë©´ triggerBuzzerí•¨ìˆ˜ë¥¼ ë™ì‘í•˜ë„ë¡ í•©ë‹ˆë‹¤.

**ì£¼ìš” ê¸°ëŠ¥**  
ì„¼ì„œ ë ˆì§€ìŠ¤í„° ì“°ê¸°/ì½ê¸°
ê°€ì†ë„ ë°ì´í„° ì½ê¸°
ì›€ì§ì„ ê°’ í™•ì¸

**(1) ë ˆì§€ìŠ¤í„° ì“°ê¸° ë° ì½ê¸°***
```c
void writeRegister_ADXL345(char address, char value) {
    unsigned char buff[2] = { address, value };
    digitalWrite(CS_GPIO, LOW);
    wiringPiSPIDataRW(SPI_CH, buff, 2);
    digitalWrite(CS_GPIO, HIGH);
}

void readRegister_ADXL345(char registerAddress, int numBytes, char *values) {
    values[0] = 0x80 | registerAddress;
    if (numBytes > 1) values[0] |= 0x40;

    digitalWrite(CS_GPIO, LOW);
    wiringPiSPIDataRW(SPI_CH, values, numBytes + 1);
    digitalWrite(CS_GPIO, HIGH);
}
```

**(2) ê°€ì†ë„ ë°ì´í„° ì½ê¸°***
```c
void readAccelerometerData(short *x, short *y, short *z) {
    unsigned char buffer[7] = {0};
    readRegister_ADXL345(DATAX0, 6, buffer);

    *x = ((short)buffer[2] << 8) | (short)buffer[1];
    *y = ((short)buffer[4] << 8) | (short)buffer[3];
    *z = ((short)buffer[6] << 8) | (short)buffer[5];
}
```

---

#### 3. ë¶€ì € ì œì–´  
**ì„¤ëª…**
ë¶€ì €ë¥¼ í†µí•´ ê²½ê³ ìŒì„ ë°œìƒì‹œí‚¤ë©°, ì†Œí”„íŠ¸ì›¨ì–´ PWMì„ ì‚¬ìš©í•˜ì—¬ ì£¼íŒŒìˆ˜ë¥¼ ì œì–´í•©ë‹ˆë‹¤.

**ì£¼ìš” ì½”ë“œ**
```c
void triggerBuzzer(int durationMs) {
    digitalWrite(BUZZER_GPIO, HIGH);
    delay(durationMs);
    digitalWrite(BUZZER_GPIO, LOW);
}

void triggerBuzzerPWM(int durationMs, int frequency) {
    softToneCreate(BUZZER_GPIO);
    softToneWrite(BUZZER_GPIO, frequency);
    delay(durationMs);
    softToneWrite(BUZZER_GPIO, 0);
}
```

---

#### 4. ë©€í‹°ìŠ¤ë ˆë“œ êµ¬ì„±
**ì„¤ëª…**  
ìŠ¤ë ˆë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì„¼ì„œ ë°ì´í„°ë¥¼ ì½ê³ , ë¶€ì €ë¥¼ ì œì–´í•˜ëŠ” ì‘ì—…ì„ ë³‘ë ¬ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤.

**ì£¼ìš” ì½”ë“œ**  
**(1) ì„¼ì„œ ìŠ¤ë ˆë“œ**
```c
void *sensorThread(void *arg) {
    SharedData *data = (SharedData *)arg;
    short prevX = 1, prevY = 50, prevZ = 118;
    while (data->running) {
        short x, y, z;
        readAccelerometerData(&x, &y, &z);

        if (abs(x - prevX) > 100 || abs(y - prevY) > 100 || abs(z - prevZ) > 100) {
            data->triggerBuzzer = 1;
        }

        pthread_mutex_lock(&data->mutex);
        data->x = x;
        data->y = y;
        data->z = z;
        pthread_mutex_unlock(&data->mutex);

        prevX = x;
        prevY = y;
        prevZ = z;

        usleep(50000);
    }
    return NULL;
}
```
**(2) ë¶€ì € ìŠ¤ë ˆë“œ**
```c
void *buzzerThread(void *arg) {
    SharedData *data = (SharedData *)arg;
    const int duration = 800;
    const int frequency = 3000;

    while (data->running) {
        pthread_mutex_lock(&data->mutex);
        if (data->triggerBuzzer) {
            data->triggerBuzzer = 0;
            pthread_mutex_unlock(&data->mutex);
            triggerBuzzerPWM(duration, frequency);
        } else {
            pthread_mutex_unlock(&data->mutex);
        }
        usleep(100000);
    }
    return NULL;
}
```

---

#### 5. ê³µìœ  ë°ì´í„° êµ¬ì¡°  
**ì„¤ëª…**  
ìŠ¤ë ˆë“œ ê°„ ë°ì´í„° ê³µìœ  ë° ë™ê¸°í™”ë¥¼ ìœ„í•œ êµ¬ì¡°ì²´ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.

**ì£¼ìš” ì½”ë“œ**  
```c
typedef struct {
    short x, y, z;
    int triggerBuzzer;
    int running;
    pthread_mutex_t mutex;
} SharedData;
```

---

#### 6. ë©”ì¸ í•¨ìˆ˜  
**ì„¤ëª…**  
ì‹œìŠ¤í…œ ì´ˆê¸°í™” ë° ìŠ¤ë ˆë“œ ì‹¤í–‰ì„ í†µí•´ ì „ì²´ ê¸ˆê³  ë™ì‘ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.

**ì£¼ìš” ì½”ë“œ**  
```c
int main() {
    SharedData data = { .x = 0, .y = 0, .z = 0, .triggerBuzzer = 0, .running = 1 };
    pthread_mutex_init(&data.mutex, NULL);

    if (initSPI() == -1) return -1;

    pthread_t sensorThreadId, buzzerThreadId;
    pthread_create(&sensorThreadId, NULL, sensorThread, &data);
    pthread_create(&buzzerThreadId, NULL, buzzerThread, &data);

    printf("Press ENTER to exit.\n");
    getchar();

    data.running = 0;
    pthread_join(sensorThreadId, NULL);
    pthread_join(buzzerThreadId, NULL);
    pthread_mutex_destroy(&data.mutex);

    return 0;
}
```

---

## ğŸ¥ 8. í”„ë¡œì íŠ¸ ì‹œì—° ë™ì˜ìƒ
- **í”„ë¡œì íŠ¸ ì‹œì—° ë™ì˜ìƒ**  
  - ì ê¸ˆ í•´ì œ 1
    - ì²« ì‹œë„ì— ì ê¸ˆ í•´ì œí•˜ëŠ” ê²½ìš°

https://github.com/user-attachments/assets/4c12469d-2c60-4fe5-bf89-9a35286dfe9b

<img src="https://github.com/user-attachments/assets/0559d63c-82b9-4512-b933-910b839538fe" width="300" />

---

  - ì ê¸ˆ í•´ì œ 2
    - ë³µêµ¬ ì§ˆë¬¸ ì¸ì¦ í›„ ì ê¸ˆ í•´ì œí•˜ëŠ” ê²½ìš°

https://github.com/user-attachments/assets/4e36a09b-10d6-4e73-bd57-1084b098775e

<img src="https://github.com/user-attachments/assets/48a2db38-89c6-4133-862c-e30efb08b104" width="300" />

---

  - ë³µêµ¬ ì§ˆë¬¸ì— ëŒ€í•œ ë‹µì´ í‹€ë¦° ê²½ìš°
    
https://github.com/user-attachments/assets/6d1f785f-994d-4a8c-b0b2-6ee003f67b2a

<img src="https://github.com/user-attachments/assets/b7b8bf47-e589-4b8c-998d-a52317af92e3" width="300" />

---

  - ë³µêµ¬ ì§ˆë¬¸ì„ í†µê³¼í•œ í›„ 3íšŒ í‹€ë¦´ ê²½ìš°

https://github.com/user-attachments/assets/9ac86663-bbeb-430d-9497-d364cd326788

<img src="https://github.com/user-attachments/assets/effe9537-e587-473a-8608-593d7095ec35" width="300" />

---

  - ê¸ˆê³ ë¥¼ ë„ë‘‘ì§ˆ í•˜ë ¤ëŠ” ê²½ìš°

https://github.com/user-attachments/assets/ce64c342-890e-40ff-9b80-c0cc89e04f33



---

> ğŸ’¡ í”„ë¡œì íŠ¸ì— ëŒ€í•œ ì˜ê²¬ ë° í”¼ë“œë°±ì€ ì–¸ì œë“ ì§€ í™˜ì˜í•©ë‹ˆë‹¤!
